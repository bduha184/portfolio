import { defineStore } from "pinia";

export const useMemberStore = defineStore(
"member",
  () => {
    const memberFlg = ref<Boolean | null>(false);
    const getMemberFlg = computed(() => memberFlg.value !== false);

    async function register(info: RegistrationInfo) {
      await useApiFetch("/sanctum/csrf-cookie");

      const register = await useApiFetch("/api/teams/myteam/register", {
        method: "POST",
        body: info,
      });

      return register;
    }
    return { memberFlg,getMemberFlg,register};
  },
  {
    persist: true,
  }
);
